<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„É¢„Éá„É´ÁÆ°ÁêÜ - MFG„Éâ„É≠„Éº„É≥ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-layout">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>üöÅ MFG„Éâ„É≠„Éº„É≥</h2>
                <p style="font-size: 12px; color: #adb5bd; margin: 0;">ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É† v1.0</p>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="dashboard.html" class="nav-link">
                        <i>üìä</i> „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ
                    </a>
                </li>
                <li class="nav-item">
                    <a href="drone-management.html" class="nav-link">
                        <i>üöÅ</i> „Éâ„É≠„Éº„É≥ÁÆ°ÁêÜ
                    </a>
                </li>
                <li class="nav-item">
                    <a href="dataset-management.html" class="nav-link">
                        <i>üìÅ</i> „Éá„Éº„Çø„Çª„ÉÉ„ÉàÁÆ°ÁêÜ
                    </a>
                </li>
                <li class="nav-item">
                    <a href="model-management.html" class="nav-link active">
                        <i>üß†</i> „É¢„Éá„É´ÁÆ°ÁêÜ
                    </a>
                </li>
                <li class="nav-item">
                    <a href="tracking-control.html" class="nav-link">
                        <i>üéØ</i> ËøΩË∑°Âà∂Âæ°
                    </a>
                </li>
                <li class="nav-item">
                    <a href="system-monitoring.html" class="nav-link">
                        <i>‚öôÔ∏è</i> „Ç∑„Çπ„ÉÜ„É†Áõ£Ë¶ñ
                    </a>
                </li>
                <li class="nav-item">
                    <a href="settings.html" class="nav-link">
                        <i>üîß</i> Ë®≠ÂÆö
                    </a>
                </li>
                <li class="nav-item" style="border-top: 1px solid #495057; margin-top: 20px; padding-top: 20px;">
                    <a href="login.html" class="nav-link">
                        <i>üö™</i> „É≠„Ç∞„Ç¢„Ç¶„Éà
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="d-flex align-center gap-20">
                    <button class="btn btn-secondary mobile-toggle" style="display: none;">‚ò∞</button>
                    <h1 style="margin: 0; font-size: 24px;">„É¢„Éá„É´ÁÆ°ÁêÜ</h1>
                </div>
                
                <div class="d-flex align-center gap-20">
                    <button class="btn btn-success" onclick="startTraining()">
                        üöÄ Â≠¶ÁøíÈñãÂßã
                    </button>
                    <button class="btn btn-info" onclick="importModel()">
                        üì• „É¢„Éá„É´„Ç§„É≥„Éù„Éº„Éà
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <main class="content">
                <!-- Model Statistics -->
                <div class="card">
                    <div class="card-header">
                        <h3 style="margin: 0;">„É¢„Éá„É´Áµ±Ë®à</h3>
                    </div>
                    <div class="card-body">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">3</div>
                                <div class="stat-label">Á∑è„É¢„Éá„É´Êï∞</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" style="color: #198754;">2</div>
                                <div class="stat-label">Â≠¶ÁøíÊ∏à„Åø</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" style="color: #ffc107;">1</div>
                                <div class="stat-label">Â≠¶Áøí‰∏≠</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">92.8%</div>
                                <div class="stat-label">Âπ≥ÂùáÁ≤æÂ∫¶</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Active Training -->
                <div class="card" id="training-card" style="display: none;">
                    <div class="card-header">
                        <h3 style="margin: 0;">üîÑ Â≠¶Áøí‰∏≠„ÅÆ„É¢„Éá„É´</h3>
                    </div>
                    <div class="card-body">
                        <div class="training-status">
                            <div class="d-flex justify-between align-center mb-10">
                                <strong id="training-model-name">VehicleDetector_v1.1</strong>
                                <span id="training-progress-text">„Ç®„Éù„ÉÉ„ÇØ 15/100</span>
                            </div>
                            <div class="progress mb-10">
                                <div class="progress-bar" id="training-progress" style="width: 15%"></div>
                            </div>
                            <div class="training-metrics">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                    <div>
                                        <small>Â≠¶ÁøíÊôÇÈñì</small>
                                        <div id="training-time">1ÊôÇÈñì 25ÂàÜ</div>
                                    </div>
                                    <div>
                                        <small>ÁèæÂú®„ÅÆÁ≤æÂ∫¶</small>
                                        <div id="current-accuracy">78.3%</div>
                                    </div>
                                    <div>
                                        <small>Êé®ÂÆöÊÆã„ÇäÊôÇÈñì</small>
                                        <div id="eta">45ÂàÜ</div>
                                    </div>
                                    <div>
                                        <small>Â≠¶ÁøíÁéá</small>
                                        <div id="learning-rate">0.001</div>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top: 15px;">
                                <button class="btn btn-warning btn-sm" onclick="pauseTraining()">‰∏ÄÊôÇÂÅúÊ≠¢</button>
                                <button class="btn btn-danger btn-sm" onclick="stopTraining()">Â≠¶ÁøíÂÅúÊ≠¢</button>
                                <a href="model-training.html?id=model_002" class="btn btn-info btn-sm">Ë©≥Á¥∞Ë°®Á§∫</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Model List -->
                <div class="card">
                    <div class="card-header d-flex justify-between align-center">
                        <h3 style="margin: 0;">Â≠¶ÁøíÊ∏à„Åø„É¢„Éá„É´‰∏ÄË¶ß</h3>
                        <div class="d-flex align-center gap-10">
                            <input type="text" placeholder="„É¢„Éá„É´Âêç„ÅßÊ§úÁ¥¢..." class="form-control" 
                                   style="width: 200px;" id="model-search">
                            <select class="form-control" style="width: 120px;" id="status-filter">
                                <option value="">ÂÖ®„Å¶</option>
                                <option value="trained">Â≠¶ÁøíÊ∏à„Åø</option>
                                <option value="training">Â≠¶Áøí‰∏≠</option>
                                <option value="failed">Â§±Êïó</option>
                            </select>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>„É¢„Éá„É´Âêç</th>
                                        <th>„Éá„Éº„Çø„Çª„ÉÉ„Éà</th>
                                        <th>Á≤æÂ∫¶</th>
                                        <th>Â≠¶ÁøíÊôÇÈñì</th>
                                        <th>„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                                        <th>‰ΩúÊàêÊó•</th>
                                        <th>Êìç‰Ωú</th>
                                    </tr>
                                </thead>
                                <tbody id="model-list">
                                    <!-- Populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Model Performance Chart -->
                <div class="card">
                    <div class="card-header">
                        <h3 style="margin: 0;">„É¢„Éá„É´ÊÄßËÉΩÊØîËºÉ</h3>
                    </div>
                    <div class="card-body">
                        <div id="performance-chart" style="height: 300px; display: flex; align-items: center; justify-content: center; background: #f8f9fa; border-radius: 8px;">
                            <div style="text-align: center;">
                                <div style="font-size: 48px; margin-bottom: 10px;">üìä</div>
                                <h4>„É¢„Éá„É´ÊÄßËÉΩ„ÉÅ„É£„Éº„Éà</h4>
                                <p style="color: #6c757d;">ÂêÑ„É¢„Éá„É´„ÅÆÁ≤æÂ∫¶„Å®„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÇíÊØîËºÉË°®Á§∫</p>
                                <div style="margin-top: 20px;">
                                    <div class="chart-placeholder">
                                        <div class="chart-bar" style="height: 94%; background: #198754;">
                                            <span>PersonTracker v2.3<br>94.2%</span>
                                        </div>
                                        <div class="chart-bar" style="height: 78%; background: #ffc107;">
                                            <span>VehicleDetector v1.1<br>78.3%</span>
                                        </div>
                                        <div class="chart-bar" style="height: 92%; background: #0dcaf0;">
                                            <span>PetFollower v1.0<br>91.8%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Start Training Modal -->
    <div id="start-training-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>„É¢„Éá„É´Â≠¶ÁøíÈñãÂßã</h3>
                <button class="modal-close" onclick="closeModal('start-training-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="training-form">
                    <div class="form-group">
                        <label class="form-label">„É¢„Éá„É´Âêç</label>
                        <input type="text" class="form-control" id="training-model-name-input" 
                               placeholder="‰æã: PersonDetector_v2.0" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">„Éá„Éº„Çø„Çª„ÉÉ„ÉàÈÅ∏Êäû</label>
                        <select class="form-control" id="training-dataset" required>
                            <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                            <option value="dataset_001">Person Detection v1.0 (1,250Êûö)</option>
                            <option value="dataset_002">Vehicle Detection (850Êûö)</option>
                            <option value="dataset_003">Pet Detection (2,100Êûö)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Â≠¶Áøí„Ç®„Éù„ÉÉ„ÇØÊï∞</label>
                        <input type="number" class="form-control" id="training-epochs" 
                               value="100" min="10" max="1000" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Â≠¶ÁøíÁéá</label>
                        <select class="form-control" id="training-lr">
                            <option value="0.001">0.001 (Êé®Â•®)</option>
                            <option value="0.01">0.01</option>
                            <option value="0.0001">0.0001</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">„Éê„ÉÉ„ÉÅ„Çµ„Ç§„Ç∫</label>
                        <select class="form-control" id="training-batch">
                            <option value="16">16</option>
                            <option value="32" selected>32 (Êé®Â•®)</option>
                            <option value="64">64</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="auto-stop" checked>
                            <span>Êó©ÊúüÂÅúÊ≠¢„ÇíÊúâÂäπ„Å´„Åô„Çã</span>
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('start-training-modal')">„Ç≠„É£„É≥„Çª„É´</button>
                <button class="btn btn-primary" onclick="submitTraining()">Â≠¶ÁøíÈñãÂßã</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        let trainingActive = false;
        let trainingProgress = 15;
        
        document.addEventListener('DOMContentLoaded', function() {
            populateModelList();
            setupFilters();
            updateModelStats();
            checkTrainingStatus();
            
            // Auto-refresh every 10 seconds
            setInterval(() => {
                refreshModelData();
                updateTrainingProgress();
            }, 10000);
        });
        
        function setupFilters() {
            const searchInput = document.getElementById('model-search');
            const statusFilter = document.getElementById('status-filter');
            
            searchInput.addEventListener('input', filterModels);
            statusFilter.addEventListener('change', filterModels);
        }
        
        function filterModels() {
            const searchTerm = document.getElementById('model-search').value.toLowerCase();
            const statusFilter = document.getElementById('status-filter').value;
            
            const filteredModels = window.MFGDroneApp.models.filter(model => {
                const matchesSearch = model.name.toLowerCase().includes(searchTerm);
                const matchesStatus = !statusFilter || model.status === statusFilter;
                return matchesSearch && matchesStatus;
            });
            
            populateFilteredModelList(filteredModels);
        }
        
        function populateFilteredModelList(models) {
            const modelList = document.querySelector('#model-list');
            if (!modelList) return;
            
            const modelsToShow = models || window.MFGDroneApp.models;
            modelList.innerHTML = modelsToShow.map(model => createModelRow(model)).join('');
        }
        
        function createModelRow(model) {
            const statusClass = model.status === 'trained' ? 'success' : 
                               model.status === 'training' ? 'warning' : 'danger';
            
            const accuracyDisplay = model.accuracy > 0 ? `${model.accuracy}%` : 'Â≠¶Áøí‰∏≠...';
            
            return `
                <tr>
                    <td>
                        <div class="d-flex align-center gap-10">
                            <div class="model-icon">üß†</div>
                            <strong>${model.name}</strong>
                        </div>
                    </td>
                    <td>${model.dataset}</td>
                    <td>
                        <div class="d-flex align-center gap-10">
                            <span>${accuracyDisplay}</span>
                            ${model.accuracy > 0 ? `
                                <div class="progress" style="width: 60px; height: 8px;">
                                    <div class="progress-bar" style="width: ${model.accuracy}%; background: ${getAccuracyColor(model.accuracy)};"></div>
                                </div>
                            ` : ''}
                        </div>
                    </td>
                    <td>${model.trainingTime}</td>
                    <td><span class="status status-${statusClass}">${getStatusText(model.status)}</span></td>
                    <td style="font-size: 12px;">${model.created}</td>
                    <td>
                        <div class="btn-group">
                            ${model.status === 'trained' ? `
                                <button class="btn btn-primary btn-sm" onclick="useModel('${model.id}')">‰ΩøÁî®</button>
                                <button class="btn btn-info btn-sm" onclick="testModel('${model.id}')">„ÉÜ„Çπ„Éà</button>
                            ` : ''}
                            ${model.status === 'training' ? `
                                <a href="model-training.html?id=${model.id}" class="btn btn-warning btn-sm">ÈÄ≤Êçó</a>
                            ` : ''}
                            <button class="btn btn-secondary btn-sm" onclick="exportModel('${model.id}')">„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteModel('${model.id}')">ÂâäÈô§</button>
                        </div>
                    </td>
                </tr>
            `;
        }
        
        function getAccuracyColor(accuracy) {
            if (accuracy >= 90) return '#198754';
            if (accuracy >= 70) return '#ffc107';
            return '#dc3545';
        }
        
        function getStatusText(status) {
            const statusMap = {
                'trained': 'Â≠¶ÁøíÊ∏à„Åø',
                'training': 'Â≠¶Áøí‰∏≠',
                'failed': 'Â§±Êïó'
            };
            return statusMap[status] || status.toUpperCase();
        }
        
        function checkTrainingStatus() {
            const trainingModel = window.MFGDroneApp.models.find(m => m.status === 'training');
            if (trainingModel) {
                trainingActive = true;
                document.getElementById('training-card').style.display = 'block';
                updateTrainingDisplay(trainingModel);
            }
        }
        
        function updateTrainingDisplay(model) {
            document.getElementById('training-model-name').textContent = model.name;
            const progress = Math.min(trainingProgress, 100);
            document.getElementById('training-progress').style.width = progress + '%';
            document.getElementById('training-progress-text').textContent = `„Ç®„Éù„ÉÉ„ÇØ ${Math.floor(progress)}/100`;
            
            // Update training metrics
            const hours = Math.floor(trainingProgress * 0.02);
            const minutes = Math.floor((trainingProgress * 0.02 - hours) * 60);
            document.getElementById('training-time').textContent = `${hours}ÊôÇÈñì ${minutes}ÂàÜ`;
            
            const currentAccuracy = Math.min(50 + trainingProgress * 0.5, 95);
            document.getElementById('current-accuracy').textContent = currentAccuracy.toFixed(1) + '%';
            
            const etaMinutes = Math.max(0, Math.floor((100 - trainingProgress) * 0.8));
            document.getElementById('eta').textContent = etaMinutes > 60 ? 
                `${Math.floor(etaMinutes / 60)}ÊôÇÈñì ${etaMinutes % 60}ÂàÜ` : 
                `${etaMinutes}ÂàÜ`;
        }
        
        function updateTrainingProgress() {
            if (trainingActive && trainingProgress < 100) {
                trainingProgress += Math.random() * 2; // Random progress increment
                const trainingModel = window.MFGDroneApp.models.find(m => m.status === 'training');
                if (trainingModel) {
                    updateTrainingDisplay(trainingModel);
                    
                    // Complete training at 100%
                    if (trainingProgress >= 100) {
                        completeTraining(trainingModel);
                    }
                }
            }
        }
        
        function completeTraining(model) {
            trainingActive = false;
            model.status = 'trained';
            model.accuracy = 85 + Math.random() * 10; // Random final accuracy
            model.trainingTime = document.getElementById('training-time').textContent;
            
            document.getElementById('training-card').style.display = 'none';
            populateModelList();
            updateModelStats();
            
            showNotification(`„É¢„Éá„É´ "${model.name}" „ÅÆÂ≠¶Áøí„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅÁ≤æÂ∫¶: ${model.accuracy.toFixed(1)}%`, 'success');
        }
        
        function startTraining() {
            document.getElementById('start-training-modal').style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        function submitTraining() {
            const modelName = document.getElementById('training-model-name-input').value;
            const dataset = document.getElementById('training-dataset').value;
            const epochs = document.getElementById('training-epochs').value;
            const lr = document.getElementById('training-lr').value;
            const batchSize = document.getElementById('training-batch').value;
            
            if (!modelName || !dataset) {
                showNotification('„É¢„Éá„É´Âêç„Å®„Éá„Éº„Çø„Çª„ÉÉ„Éà„ÅØÂøÖÈ†à„Åß„Åô', 'danger');
                return;
            }
            
            if (trainingActive) {
                showNotification('Êó¢„Å´Â≠¶Áøí‰∏≠„ÅÆ„É¢„Éá„É´„Åå„ÅÇ„Çä„Åæ„Åô', 'warning');
                return;
            }
            
            const datasetName = document.querySelector(`#training-dataset option[value="${dataset}"]`).textContent;
            
            const newModel = {
                id: 'model_' + Math.random().toString(36).substr(2, 9),
                name: modelName,
                dataset: datasetName.split(' (')[0],
                accuracy: 0,
                trainingTime: '0ÂàÜ',
                status: 'training',
                created: new Date().toLocaleDateString('ja-JP'),
                epochs: epochs,
                learningRate: lr,
                batchSize: batchSize
            };
            
            window.MFGDroneApp.models.push(newModel);
            trainingActive = true;
            trainingProgress = 0;
            
            document.getElementById('training-card').style.display = 'block';
            updateTrainingDisplay(newModel);
            
            populateModelList();
            closeModal('start-training-modal');
            document.getElementById('training-form').reset();
            
            showNotification(`„É¢„Éá„É´ "${modelName}" „ÅÆÂ≠¶Áøí„ÇíÈñãÂßã„Åó„Åæ„Åó„Åü`, 'success');
        }
        
        function pauseTraining() {
            showNotification('Â≠¶Áøí„Çí‰∏ÄÊôÇÂÅúÊ≠¢„Åó„Åæ„Åó„Åü', 'warning');
            // In real app, would pause training
        }
        
        function stopTraining() {
            if (confirm('Â≠¶Áøí„ÇíÂÅúÊ≠¢„Åó„Åæ„Åô„ÅãÔºüÈÄ≤Êçó„ÅØÂ§±„Çè„Çå„Åæ„Åô„ÄÇ')) {
                const trainingModel = window.MFGDroneApp.models.find(m => m.status === 'training');
                if (trainingModel) {
                    trainingModel.status = 'failed';
                    trainingActive = false;
                    document.getElementById('training-card').style.display = 'none';
                    populateModelList();
                    showNotification('Â≠¶Áøí„ÇíÂÅúÊ≠¢„Åó„Åæ„Åó„Åü', 'info');
                }
            }
        }
        
        function useModel(modelId) {
            const model = window.MFGDroneApp.models.find(m => m.id === modelId);
            if (model) {
                showNotification(`„É¢„Éá„É´ "${model.name}" „Çí‰ΩøÁî®„É¢„Éº„Éâ„Å´Ë®≠ÂÆö„Åó„Åæ„Åó„Åü`, 'success');
                // Would redirect to tracking control
                setTimeout(() => {
                    window.location.href = 'tracking-control.html?model=' + modelId;
                }, 1500);
            }
        }
        
        function testModel(modelId) {
            const model = window.MFGDroneApp.models.find(m => m.id === modelId);
            if (model) {
                showNotification(`„É¢„Éá„É´ "${model.name}" „ÅÆ„ÉÜ„Çπ„Éà„ÇíÈñãÂßã„Åó„Åæ„Åô...`, 'info');
                // Simulate test
                setTimeout(() => {
                    showNotification('„ÉÜ„Çπ„ÉàÂÆå‰∫Ü„ÄÇÁ≤æÂ∫¶„ÅåÁ¢∫Ë™ç„Åï„Çå„Åæ„Åó„Åü„ÄÇ', 'success');
                }, 3000);
            }
        }
        
        function exportModel(modelId) {
            const model = window.MFGDroneApp.models.find(m => m.id === modelId);
            if (model) {
                showNotification(`„É¢„Éá„É´ "${model.name}" „Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åô...`, 'info');
                setTimeout(() => {
                    showNotification('„Ç®„ÇØ„Çπ„Éù„Éº„Éà„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü', 'success');
                }, 2000);
            }
        }
        
        function deleteModel(modelId) {
            const model = window.MFGDroneApp.models.find(m => m.id === modelId);
            if (model && confirm(`„É¢„Éá„É´ "${model.name}" „ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü`)) {
                const index = window.MFGDroneApp.models.findIndex(m => m.id === modelId);
                window.MFGDroneApp.models.splice(index, 1);
                populateModelList();
                updateModelStats();
                showNotification(`„É¢„Éá„É´ "${model.name}" „ÅåÂâäÈô§„Åï„Çå„Åæ„Åó„Åü`, 'info');
            }
        }
        
        function importModel() {
            showNotification('„É¢„Éá„É´„Ç§„É≥„Éù„Éº„ÉàÊ©üËÉΩ„ÅØÈñãÁô∫‰∏≠„Åß„Åô', 'info');
        }
        
        function updateModelStats() {
            const totalModels = window.MFGDroneApp.models.length;
            const trainedModels = window.MFGDroneApp.models.filter(m => m.status === 'trained').length;
            const trainingModels = window.MFGDroneApp.models.filter(m => m.status === 'training').length;
            
            const avgAccuracy = window.MFGDroneApp.models
                .filter(m => m.accuracy > 0)
                .reduce((sum, m, _, arr) => sum + m.accuracy / arr.length, 0);
            
            // Update stat cards
            const statCards = document.querySelectorAll('.stat-number');
            if (statCards.length >= 4) {
                statCards[0].textContent = totalModels;
                statCards[1].textContent = trainedModels;
                statCards[2].textContent = trainingModels;
                statCards[3].textContent = avgAccuracy > 0 ? avgAccuracy.toFixed(1) + '%' : 'N/A';
            }
        }
        
        function refreshModelData() {
            updateModelStats();
            populateModelList();
        }
    </script>
    
    <style>
        .model-icon {
            font-size: 16px;
            flex-shrink: 0;
        }
        
        .training-status {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--warning-color);
        }
        
        .training-metrics {
            margin-top: 15px;
        }
        
        .training-metrics > div > div {
            display: flex;
            flex-direction: column;
        }
        
        .training-metrics small {
            color: #6c757d;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .chart-placeholder {
            display: flex;
            align-items: end;
            justify-content: center;
            gap: 20px;
            height: 150px;
            margin-top: 20px;
        }
        
        .chart-bar {
            width: 80px;
            background: var(--primary-color);
            border-radius: 4px 4px 0 0;
            display: flex;
            align-items: end;
            justify-content: center;
            color: white;
            font-size: 11px;
            text-align: center;
            padding: 5px;
            position: relative;
        }
        
        .chart-bar span {
            position: absolute;
            bottom: 5px;
            white-space: nowrap;
        }
        
        @media (max-width: 768px) {
            .mobile-toggle {
                display: block !important;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn-group .btn {
                width: 100%;
                margin: 2px 0;
            }
            
            .training-metrics > div {
                grid-template-columns: 1fr 1fr !important;
            }
            
            .chart-placeholder {
                height: 100px;
                gap: 10px;
            }
            
            .chart-bar {
                width: 60px;
            }
        }
    </style>
</body>
</html>